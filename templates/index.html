<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Character Recognition</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!--TODO: Favicon Link-->
    <link rel="icon" href="" />

    <meta name="author" content="Anthony Chen" />
    <meta
      name="description"
      content="A website demonstration of how linear algebra techniques (e.g. singular value decomposition) can be used to classify handwritten characters. An accompanying slideshow explains the mathematical intuition of the machine learning models developed for the project. The website is interactive, allowing users to draw a character and see the predictions of different models.
    "
    />
  </head>
  <body>
    <div class="container-fluid">
      <h1 class="text-center">Character Recognition</h1>
      <canvas
        id="draw"
        width="280"
        height="280"
        style="border: 1px solid black"
      ></canvas>

      <button id="predict" class="btn btn-outline-primary">Predict</button>
      <button id="clear" class="btn btn-outline-danger">Clear</button>

      <label>
        <input type="radio" name="model" value="least-squares" />
        Least Squares
      </label>

      <label>
        <input type="radio" name="model" value="mean-matrix" />
        Mean Matrix
      </label>

      <label>
        <input type="radio" name="model" value="mean-value" />
        Mean Value
      </label>

      <div id="hidden" class="d-none"></div>
    </div>

    <script>
      const canvas = document.getElementById('draw');
      const ctx = canvas.getContext('2d');

      ctx.lineWidth = 10;
      ctx.lineCap = 'round';

      let penDown = false;

      canvas.onmousedown = (e) => {
        penDown = true;
        ctx.beginPath();
      };

      canvas.onmousemove = (e) => {
        if (penDown) {
          ctx.lineTo(e.offsetX, e.offsetY);
          ctx.stroke();
        }
      };

      canvas.onmouseup = () => {
        penDown = false;
      };

      canvas.onmouseleave = () => {
        penDown = false;
      };

      document.getElementById('clear').onclick = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      };

      document.getElementById('predict').onclick = () => {
        const img = new Image(28, 28);
        img.src = canvas.toDataURL();
        document.getElementById('hidden').replaceChildren(img);

        ctx.clearRect(0, 0, canvas.width, canvas.height);
      };
    </script>
  </body>
</html>
